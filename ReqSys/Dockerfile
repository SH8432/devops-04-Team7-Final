FROM node:hydrogen-alpine3.18

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm ci --omit-dev

ARG HOSTNAME="Default_Value"
ARG USERNAME="Default_Value"
ARG PASSWORD="Default_Value"
ARG DATABASE="Default_Value"
ARG AWS_ACCESS_KEY_ID="Default_Value"
ARG AWS_SECRET_ACCESS_KEY="Default_Value"
ARG QUEUE_URL="Default_Value"

ENV HOSTNAME = HOSTNAME
ENV USERNAME = USERNAME
ENV PASSWORD = PASSWORD
ENV DATABASE = DATABASE
ENV AWS_ACCESS_KEY_ID = AWS_ACCESS_KEY_ID
ENV AWS_SECRET_ACCESS_KEY = AWS_SECRET_ACCESS_KEY
ENV QUEUE_URL = QUEUE_URL

COPY . .

EXPOSE 3000

CMD [ "node", "app.js" ]
